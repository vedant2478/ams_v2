#:kivy 2.2.0
#:import dp kivy.metrics.dp


<ActivityCard@BoxLayout>:
    key_name: ""
    taken_text: ""
    returned_text: ""
    orientation: "vertical"
    size_hint_y: None
    height: "90dp"
    padding: "10dp"
    spacing: "4dp"
    canvas.before:
        Color:
            rgba: 0.08, 0.16, 0.26, 1
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [15, 15, 15, 15]

    Label:
        text: root.key_name
        font_size: "18sp"
        bold: True
        color: 1, 1, 1, 1
        size_hint_y: None
        height: "26dp"
        halign: "left"
        valign: "middle"
        text_size: self.size

    Label:
        text: "Taken    :  " + root.taken_text
        font_size: "14sp"
        color: 0.85, 0.9, 0.95, 1
        size_hint_y: None
        height: "22dp"
        halign: "left"
        valign: "middle"
        text_size: self.size

    Label:
        text: "Returned :  " + root.returned_text
        font_size: "14sp"
        color: 0.85, 0.9, 0.95, 1
        size_hint_y: None
        height: "22dp"
        halign: "left"
        valign: "middle"
        text_size: self.size



<ActivityDoneScreen>:
    name: "activity_done"

    FloatLayout:

        Header:
            pos_hint: {"top": 1}

        GradientBackground:
            pos: self.parent.pos
            size: self.parent.size

        BoxLayout:
            orientation: "vertical"
            size_hint: None, None
            size: "540dp", "640dp"
            pos_hint: {"center_x": 0.5, "center_y": 0.50}
            padding: "30dp"
            spacing: "18dp"

            # Big green check
            Widget:
                size_hint_y: None
                height: "170dp"
                canvas:
                    Color:
                        rgba: 0, 1, 0, 1
                    Line:
                        circle: (self.center_x, self.center_y, 70)
                        width: 6
                    Line:
                        points: self.center_x - 35, self.center_y, self.center_x - 5, self.center_y - 35, self.center_x + 45, self.center_y + 35
                        width: 6

            # Title
            Label:
                text: "ACTIVITY\nCOMPLETED"
                font_size: "30sp"
                bold: True
                color: 0, 1, 0, 1
                halign: "center"
                valign: "middle"
                text_size: self.size
                size_hint_y: None
                height: "80dp"

            # ===== CARDS PANEL =====
            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: "14dp"
                spacing: "10dp"
                canvas.before:
                    Color:
                        rgba: 0.05, 0.12, 0.22, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [22, 22, 22, 22]

                # Scrollable list of key cards
                ScrollView:
                    size_hint_y: 1
                    do_scroll_x: False

                    BoxLayout:
                        id: cards_container
                        orientation: "vertical"
                        size_hint_y: None
                        padding: "8dp"
                        spacing: "10dp"
                        height: self.minimum_height


            Widget:
                size_hint_y: None
                height: "10dp"

            Label:
                text: "Auto-dismissing in [b]" + str(root.countdown) + "[/b] seconds..."
                markup: True
                font_size: "16sp"
                color: 0.9, 0.95, 1, 1
                size_hint_y: None
                height: "26dp"

            Widget:
                size_hint_y: None
                height: "16dp"

            Button:
                text: "RETURN TO MAIN MENU"
                size_hint_y: None
                height: "52dp"
                font_size: "16sp"
                bold: True
                background_normal: ""
                background_color: 0, 0.8, 0, 1
                color: 1, 1, 1, 1
                on_release: root.on_return_pressed()

        Footer:
            pos_hint: {"y": 0}
            version_text: "Version: 12.9.3"
